<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wwh.dao.IRegisterScoreAwardConfigDao">

	<select id="getCurrentPlatformScoreAward" resultType="java.lang.Double">
		select
		a.award_score
		from  wallet_platform_register_score_award_config_t a 
		where 1=1  and a.status='Y'
		ORDER BY a.last_updated_date DESC 
		limit 0,1
	</select>
	
	<insert id="insert" parameterType="com.wwh.vo.RegisterScoreAwardConfigVO" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 24 16:31:40 CST 2016.
    -->
    <selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into wallet_platform_register_score_award_config_t (award_score, status, active_flag, 
      delete_flag, created_date, created_by, 
      last_updated_date, last_updated_by)
    values (#{awardScore,jdbcType=DECIMAL}, #{status,jdbcType=CHAR}, #{activeFlag,jdbcType=CHAR}, 
      #{deleteFlag,jdbcType=CHAR}, now(), #{createdBy,jdbcType=BIGINT}, 
      now(), #{lastUpdatedBy,jdbcType=BIGINT})
  </insert>
  
  
  <update id="updateRegisterScoreAwardConfig" parameterType="com.wwh.vo.RegisterScoreAwardConfigVO">
  		update wallet_platform_register_score_award_config_t 
	  		<trim prefix="set" suffixOverrides=",">
		  		<if test="status != null">
		  			status=#{status,jdbcType=CHAR},
		  		</if>
		  		<if test="activeFlag != null">
		  			active_flag=#{activeFlag,jdbcType=CHAR},
		  		</if>
		  		<if test="lastUpdatedBy != null">
		  			last_updated_by = #{lastUpdatedBy,jdbcType=BIGINT},
		  		</if>
		  		last_updated_date = now()
	  		</trim>
  		where  id=#{id,jdbcType=INTEGER}
  		
  </update>

  <select id="getReisterScorAwardConfigInfo" resultType="com.wwh.vo.RegisterScoreAwardConfigVO">
		select
			a.award_score as awardScore,
			a.id as id,
			a.status as status,
			a.active_flag as activeFlag, 
			a.delete_flag as deleteFlag,
			a.created_date as createdDate,
			a.created_by as createdBy,
			a.last_updated_date as lastUpdatedDate,
			a.last_updated_by as lastUpdatedBy
		from  wallet_platform_register_score_award_config_t a 
		where 1=1  
			and a.status='Y'
		ORDER BY a.last_updated_date DESC 
		limit 0,1
 </select>
	

</mapper>  